<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>×”××—×™× ××›×•× ×™×ª ×‘×¢"× ğŸš—ğŸ’¦ğŸ§½</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: url('background.jpg') center/cover fixed no-repeat;
      /* ×’×™×‘×•×™ ×‘××§×¨×” ×©××™×Ÿ ×ª××•× ×ª ×¨×§×¢ */
      background-color: #e8f2ff;
      color: #222;
    }

    header {
      position: relative;
      padding: 60px 20px;
      text-align: center;
      color: white;
    }

    header::before {
      content: "";
      position: absolute;
      inset: 0;
      background: rgba(10, 80, 160, 0.7);
    }

    header * {
      position: relative;
      z-index: 1;
    }

    .team-note {
      position: absolute;
      left: 20px;
      top: 20px;
      font-weight: bold;
    }

    section {
      background: white;
      max-width: 900px;
      margin: 20px auto;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }

    h2 {
      color: #0a74da;
    }

    ul {
      line-height: 1.8;
    }

    button {
      background: #0a74da;
      color: white;
      border: none;
      padding: 12px;
      width: 100%;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
    }

    button:hover {
      background: #085bb0;
    }

    input, select, textarea {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border-radius: 6px;
      border: 1px solid #ccc;
      box-sizing: border-box;
    }

    footer {
      text-align: center;
      padding: 15px;
      color: #666;
    }

    /* ×“×™×¨×•×’ */
    .rating-box {
      position: fixed;
      right: 20px;
      top: 140px;
      width: 230px;
      background: #ffffffee;
      border-radius: 12px;
      padding: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      z-index: 999;
    }

    .rating-box h3 {
      text-align: center;
      color: #0a74da;
      margin-top: 0;
    }

    .stars {
      text-align: center;
      font-size: 22px;
      cursor: pointer;
      user-select: none;
    }

    .stars span {
      filter: grayscale(100%);
      margin: 0 1px;
    }

    .stars span.active {
      filter: grayscale(0%);
    }

    .review {
      border-bottom: 1px solid #eee;
      padding: 10px 0;
    }

    .stars-view {
      color: gold;
      margin: 4px 0;
    }

    /* ×§×¦×ª ×¨×™×•×•×— ×‘×™×Ÿ ×§×•×¤×¡××•×ª */
    .rating-box + .rating-box {
      margin-top: 10px;
    }

    /* ××•×‘×™×™×œ */
    @media (max-width: 980px) {
      .rating-box {
        position: static;
        width: auto;
        max-width: 900px;
        margin: 10px auto;
      }
    }
  </style>
</head>

<body>

<header>
  <div class="team-note">ğŸ‘¥ ×× ×—× ×• 4 ×× ×©×™× ×‘×¢×¡×§</div>
  <h1>×”××—×™× ××›×•× ×™×ª ×‘×¢"× ğŸš—ğŸ’¦ğŸ§½</h1>
  <p style="color:black;font-weight:bold;">
    (ğŸš—ğŸ’¦ğŸ§½ ×™×”×™×• ×™××™ ×©×™×©×™ ×©×œ× ×ª×ª×§×™×™× ×©×˜×™×¤×” ×‘×©×œ ×¡×™×‘×•×ª ×¤×¨×˜×™×•×ª, ×‘×‘×§×©×” ×”×‘×™× ×• ×–××ª)
  </p>
</header>

<!-- ×“×™×¨×•×’ -->
<div class="rating-box">
  <h3>×“×¨×’×• ××•×ª× ×• â­</h3>
  <div class="stars" id="stars" aria-label="×“×™×¨×•×’ ×›×•×›×‘×™×">
    <span data-value="1" title="1">â­</span>
    <span data-value="2" title="2">â­</span>
    <span data-value="3" title="3">â­</span>
    <span data-value="4" title="4">â­</span>
    <span data-value="5" title="5">â­</span>
  </div>
  <input type="text" id="reviewName" placeholder="×”×©× ×©×œ×›×" />
  <textarea id="feedback" placeholder="×›×ª×‘×• ××©×•×‘ ×§×¦×¨..."></textarea>
  <button type="button" onclick="sendFeedback()">×©×œ×— ××©×•×‘</button>
</div>

<div class="rating-box" style="top:360px;">
  <h3>â­ ×—×•×•×ª ×“×¢×ª</h3>
  <div id="reviewsList"></div>
</div>

<section>
  <h2>×©×¢×•×ª ×¤×ª×™×—×”</h2>
  <p>ğŸ•˜ 09:00 â€“ 14:30</p>
  <p><strong>×™×•× ×©×™×©×™ ×‘×œ×‘×“</strong><br>×—×•×¤×©×ª ×¤×¡×— ×•×—×œ×§ ××”×—×•×¤×© ×”×’×“×•×œ</p>
</section>

<section>
  <h2>××—×™×¨×™×</h2>
  <ul>
    <li>ğŸš— ×¤× ×™× + ×—×•×¥ â€“ 60 â‚ª</li>
    <li>ğŸš¿ ×—×•×¥ ×‘×œ×‘×“ â€“ 25 â‚ª</li>
    <li>ğŸ§¼ ×¤× ×™× ×‘×œ×‘×“ â€“ 35 â‚ª</li>
  </ul>
</section>

<section>
  <h2>×–××Ÿ ×©×˜×™×¤×”</h2>
  <ul>
    <li>×¤× ×™× + ×—×•×¥: 30â€“35 ×“×§×•×ª</li>
    <li>×—×•×¥ ×‘×œ×‘×“: 15â€“20 ×“×§×•×ª</li>
    <li>×¤× ×™× ×‘×œ×‘×“: 20â€“25 ×“×§×•×ª</li>
  </ul>
</section>

<section>
  <h2>×”×–×× ×ª ×©×˜×™×¤×”</h2>
  <p style="color:#c0392b;font-weight:bold;">
    âš ï¸ (×‘×—×™×¨×ª ×©×¢×” ×œ× ××¨××” ×× ×ª×¤×•×¡ â€“ ×× ×—× ×• × ×¢×“×›×Ÿ ××ª×›×)
  </p>

  <form onsubmit="sendWhatsApp(event)">
    <label for="name">×©× ××œ×</label>
    <input id="name" required />

    <label for="phone">×˜×œ×¤×•×Ÿ</label>
    <input id="phone" type="tel" required />

    <label for="service">×¡×•×’ ×©×˜×™×¤×”</label>
    <select id="service">
      <option>×¤× ×™× ×•×—×•×¥ â€“ 60 â‚ª</option>
      <option>×—×•×¥ ×‘×œ×‘×“ â€“ 25 â‚ª</option>
      <option>×¤× ×™× ×‘×œ×‘×“ â€“ 35 â‚ª</option>
    </select>

    <label for="time">×©×¢×” (××¨×•×•×—×™× ×©×œ 35 ×“×§×•×ª)</label>
    <select id="time"></select>

    <button type="submit">×©×œ×— ×‘×•×•××˜×¡××¤</button>
  </form>
</section>

<footer>
  Â© ×”××—×™× ××›×•× ×™×ª ×‘×¢"× ğŸš—ğŸ’¦
</footer>

<script>
  // ---------------------------
  // ×ª×•×¨×™× (×©×¢×•×ª ×ª×¤×•×¡×•×ª ××§×•××™×•×ª)
  // ---------------------------
  // ×—×©×•×‘ ×œ×“×¢×ª: localStorage ×”×•× ×œ×¤×™ ××›×©×™×¨/×“×¤×“×¤×Ÿ ×•×œ× "×©×¨×ª".
  // ×›×“×™ ×©×–×” ×™×”×™×” ××©×•×ª×£ ×œ×›×œ ×”×œ×§×•×—×•×ª ×¦×¨×™×š ×¦×“-×©×¨×ª (Database).
  let takenTimes = ['10:30', '11:15'];

  try {
    const saved = JSON.parse(localStorage.getItem('takenTimes')) || [];
    takenTimes = [...new Set([...takenTimes, ...saved])];
  } catch (e) {
    // ×× ×™×© ×¢×¨×š ×œ× ×ª×§×™×Ÿ ×‘-localStorage ×¤×©×•×˜ ××ª×¢×œ××™×
  }

  // ×™×¦×™×¨×ª ×©×¢×•×ª
  const timeSelect = document.getElementById('time');
  let start = 9 * 60;           // 09:00
  const end = 14 * 60 + 30;     // 14:30

  while (start <= end) {
    const h = String(Math.floor(start / 60)).padStart(2, '0');
    const m = String(start % 60).padStart(2, '0');
    const t = `${h}:${m}`;

    const opt = document.createElement('option');
    opt.value = t;
    opt.textContent = t;

    if (takenTimes.includes(t)) {
      opt.disabled = true;
      opt.textContent += ' (×ª×¤×•×¡)';
    }

    timeSelect.appendChild(opt);
    start += 35;
  }

  // ×©×œ×™×—×” ×œ×•×•××˜×¡××¤
  function sendWhatsApp(e) {
    e.preventDefault();

    const fullName = document.getElementById('name').value.trim();
    const phone = document.getElementById('phone').value.trim();
    const service = document.getElementById('service').value;
    const time = document.getElementById('time').value;

    if (!fullName || !phone || !time) {
      alert('×× × ××œ××• ×©×, ×˜×œ×¤×•×Ÿ ×•×©×¢×”.');
      return;
    }

    // ×©××™×¨×ª ×©×¢×” ×›×ª×¤×•×¡×” (××§×•××™×ª)
    takenTimes = [...new Set([...takenTimes, time])];
    localStorage.setItem('takenTimes', JSON.stringify(takenTimes));

    const msg =
`×”×–×× ×” ×—×“×©×”:
×©×: ${fullName}
×˜×œ×¤×•×Ÿ: ${phone}
×©×™×¨×•×ª: ${service}
×©×¢×”: ${time}`;

    const url = `https://wa.me/972585378542?text=${encodeURIComponent(msg)}`;
    window.location.href = url;
  }

  // ---------------------------
  // ×“×™×¨×•×’ + ×—×•×•×ª ×“×¢×ª
  // ---------------------------
  let selectedRating = 0;
  const starEls = Array.from(document.querySelectorAll('#stars span'));

  starEls.forEach((s, i) => {
    s.addEventListener('click', () => {
      selectedRating = i + 1;
      starEls.forEach((x, idx) => x.classList.toggle('active', idx < selectedRating));
    });
  });

  function loadReviews() {
    const list = document.getElementById('reviewsList');
    list.innerHTML = '';

    let reviews = [];
    try {
      reviews = JSON.parse(localStorage.getItem('reviews')) || [];
    } catch (e) {
      reviews = [];
    }

    if (!reviews.length) {
      list.innerHTML = '<div style="color:#777;">×¢×“×™×™×Ÿ ××™×Ÿ ×—×•×•×ª ×“×¢×ª.</div>';
      return;
    }

    reviews.forEach(r => {
      const d = document.createElement('div');
      d.className = 'review';
      const safeName = (r.name || '×œ×§×•×— ×× ×•× ×™××™');
      const safeText = (r.text || '');

      d.innerHTML = `
        <strong>${escapeHtml(safeName)}</strong>
        <div class="stars-view">${'â­'.repeat(Number(r.rating || 0))}</div>
        <div>${escapeHtml(safeText)}</div>
      `;
      list.appendChild(d);
    });
  }

  function sendFeedback() {
    if (!selectedRating) {
      alert('×‘×—×¨ ×›×•×›×‘×™×');
      return;
    }

    const name = document.getElementById('reviewName').value.trim() || '×œ×§×•×— ×× ×•× ×™××™';
    const text = document.getElementById('feedback').value.trim();

    if (!text) {
      alert('×× × ×›×ª×‘×• ××©×•×‘ ×§×¦×¨ ×œ×¤× ×™ ×”×©×œ×™×—×”.');
      return;
    }

    let reviews = [];
    try {
      reviews = JSON.parse(localStorage.getItem('reviews')) || [];
    } catch (e) {
      reviews = [];
    }

    reviews.unshift({
      name,
      rating: selectedRating,
      text,
      createdAt: new Date().toISOString()
    });

    localStorage.setItem('reviews', JSON.stringify(reviews));

    // × ×™×§×•×™ ×˜×•×¤×¡
    document.getElementById('reviewName').value = '';
    document.getElementById('feedback').value = '';
    selectedRating = 0;
    starEls.forEach(x => x.classList.remove('active'));

    loadReviews();
    alert('×ª×•×“×”! ×”××©×•×‘ × ×©××¨ ğŸ‘');
  }

  // ×”×’× ×” ×‘×¡×™×¡×™×ª × ×’×“ HTML ×‘×”×“×‘×§×”
  function escapeHtml(str) {
    return String(str)
      .replaceAll('&', '&amp;')
      .replaceAll('<', '&lt;')
      .replaceAll('>', '&gt;')
      .replaceAll('"', '&quot;')
      .replaceAll("'", '&#039;');
  }

  // ×˜×¢×™× ×” ×¨××©×•× ×™×ª
  loadReviews();
</script>

</body>
</html>
